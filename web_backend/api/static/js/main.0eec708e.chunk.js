(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,a){e.exports=a.p+"static/media/alert.36ecd3c9.wav"},185:function(e,t,a){e.exports=a(361)},360:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(15),s=a.n(c),o=a(174),i=a(16),u=a(17),l=a(20),d=a(18),m=a(19),p=a(74),h=a(58),f=a(29),g=a(9),b=a.n(g),_=a(13),v=a(14),E=a.n(v),w=function(){function e(t){var a=this;Object(i.a)(this,e),this.login=function(){var e=Object(_.a)(b.a.mark(function e(t,n){var r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetch("/api/auth",{method:"POST",body:JSON.stringify({username:t,password:n})});case 2:return r=e.sent,E.a.isNil(r.token)||a.setToken(r.token),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(_.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetch("/api/register",{method:"POST",body:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(_.a)(b.a.mark(function e(t,n){var r,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={"Content-Type":"application/json"},a.loggedIn()&&(r.Authorization="Token "+a.getToken()),e.prev=2,e.next=5,fetch(t,Object(f.a)({headers:r,timeout:500},n)).catch(function(e){return console.log(e)});case 5:return c=e.sent,e.abrupt("return",c.json());case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",[]);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,a){return e.apply(this,arguments)}}(),this.domain=t||""}return Object(u.a)(e,[{key:"loggedIn",value:function(){return!!this.getToken()}},{key:"setToken",value:function(e){window.localStorage.setItem("token",e)}},{key:"getToken",value:function(){return window.localStorage.getItem("token")}},{key:"logout",value:function(){window.localStorage.removeItem("token")}}]),e}(),y=a(375),O=a(376),x=a(377),k=a(55),j=a(362),S=a(363),N=a(364),C=a(365),A=a(366),T=a(367),H=new w,D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(_.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.validate()){e.next=6;break}return e.next=4,H.login(a.state.username,a.state.password);case 4:n=e.sent,E.a.isNil(n.token)?a.setState({error:E.a.first(E.a.keys(n)),error_msg:E.a.first(E.a.values(n))}):(a.props.history.replace("/dashboard"),a.props.logged_in({username:a.state.username,id:n.id}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.validate=function(){return""===a.state.username?(a.setState({error:"username",error_msg:"Please input your username."}),!1):""!==a.state.password||(a.setState({error:"password",error_msg:"Please input your password."}),!1)},a.state={username:"",password:"",error:"",error_msg:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("h1",null,"Log in"),r.a.createElement(S.a,{className:E.a.isEmpty(this.state.error)?"hidden":""},r.a.createElement(N.a,{color:"danger"},this.state.error_msg)),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"username"},"User Name"),r.a.createElement(A.a,{type:"username",name:"username",id:"username",onChange:this.handleChange})),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"password"},"Password"),r.a.createElement(A.a,{type:"password",name:"password",id:"password",onChange:this.handleChange})),r.a.createElement(T.a,{onClick:this.handleSubmit},"Login"))}}]),t}(r.a.Component),F=Object(h.f)(D),P=a(22),W=a(368),M=a(369),I=a(370),B=a(371),L=a(372),R=a(373),Y=a(374),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).toggle=a.toggle.bind(Object(P.a)(a)),a.state={isOpen:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W.a,{color:"dark",light:!0,expand:"md"},r.a.createElement(M.a,{href:"/"},"Horse Racing Odds Notification"),r.a.createElement(I.a,{onClick:this.toggle}),r.a.createElement(B.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(L.a,{className:"ml-auto",navbar:!0},r.a.createElement(R.a,null,r.a.createElement(Y.a,{href:"/login"},"Login")),r.a.createElement(R.a,null,r.a.createElement(Y.a,{href:"/signup"},"Sign Up"))))))}}]),t}(r.a.Component),J=Object(h.f)(z),U=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null),r.a.createElement(y.a,{fluid:!0,className:"mt-100 mb-100"},r.a.createElement(O.a,null,r.a.createElement(x.a,{md:"4"}),r.a.createElement(x.a,{md:"4"},r.a.createElement(F,{logged_in:this.props.logged_in})))))}}]),t}(r.a.Component),K=new w,G=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.validate=function(){return e.state.password===e.state.confirm_password||(e.setState({error:"password",error_msg:"The password does not match with confirm password."}),!1)},e.handleSubmit=function(){var t=Object(_.a)(b.a.mark(function t(a){var n,r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.setState({error:""}),!e.validate()){t.next=8;break}return n=JSON.stringify({username:e.state.username,password:e.state.password}),t.next=6,K.register(n);case 6:void 0===(r=t.sent).id?e.setState({error:E.a.first(E.a.keys(r)),error_msg:E.a.first(E.a.values(r))}):e.props.history.push("/dashboard");case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={username:"",password:"",confirm_password:"",error:"",error_msg:""},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("h1",null,"Register"),r.a.createElement(S.a,{className:E.a.isEmpty(this.state.error)?"hidden":""},r.a.createElement(N.a,{color:"danger"},this.state.error_msg)),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"username"},"User Name"),r.a.createElement(A.a,{type:"username",name:"username",id:"username",onChange:this.handleChange})),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"password"},"Password"),r.a.createElement(A.a,{type:"password",name:"password",id:"password",onChange:this.handleChange})),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"confirm_password"},"Confirm Password"),r.a.createElement(A.a,{type:"password",name:"confirm_password",id:"confirm_password",onChange:this.handleChange})),r.a.createElement(T.a,{onClick:this.handleSubmit},"Sign Up"))}}]),t}(r.a.Component),q=Object(h.f)(G),V=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null),r.a.createElement(y.a,{fluid:!0,className:"mt-100 mb-100"},r.a.createElement(O.a,null,r.a.createElement(x.a,{md:"4"}),r.a.createElement(x.a,{md:"4"},r.a.createElement(q,null)))))}}]),t}(r.a.Component),$=a(26),Q=a.n($),X=(a(203),a(78)),Z=a(79),ee=new w,te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).on_select=function(e){a.setState({selected:e}),e&&a.props.tab_changed(e)},a.on_expand_change=function(e){a.setState({expanded:e}),a.props.expanded_changed(e)},a.onLogout=function(){ee.logout(),a.props.history.push("/")},a.state={selected:"Historical Bets",expanded:!1,user:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{onToggle:this.on_expand_change,onSelect:this.on_select,className:"sideNav"},r.a.createElement(Q.a.Toggle,null),r.a.createElement(Q.a.Nav,{className:"sideNavPanel",selected:e},r.a.createElement($.NavItem,{eventKey:"Notification"},r.a.createElement($.NavIcon,null,r.a.createElement(Z.a,{icon:X.a})),r.a.createElement($.NavText,null,"Notification")),r.a.createElement($.NavItem,{eventKey:"Historical Bets"},r.a.createElement($.NavIcon,null,r.a.createElement(Z.a,{icon:X.b})),r.a.createElement($.NavText,null,"Historical Bets")),r.a.createElement($.NavItem,{eventKey:"Summary"},r.a.createElement($.NavIcon,null,r.a.createElement(Z.a,{icon:X.e})),r.a.createElement($.NavText,null,"Summary")),r.a.createElement($.NavItem,{eventKey:"Account"},r.a.createElement($.NavIcon,null,r.a.createElement(Z.a,{icon:X.c})),r.a.createElement($.NavText,null,"Account")),r.a.createElement($.NavItem,{onClick:this.onLogout,className:"LogOutNavItem"},r.a.createElement($.NavIcon,null,r.a.createElement(Z.a,{icon:X.d})),r.a.createElement($.NavText,null,"Log out (",this.state.user?this.state.user.username:"",")")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{selected:e.tab,expanded:e.expanded,user:e.user}}}]),t}(r.a.Component),ae=Object(h.f)(te),ne=new w;function re(){return ce.apply(this,arguments)}function ce(){return(ce=Object(_.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/pendingnotifications",{method:"GET"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(){return oe.apply(this,arguments)}function oe(){return(oe=Object(_.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/accounts",{method:"GET"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(_.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/accounts",{method:"POST",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(){return de.apply(this,arguments)}function de(){return(de=Object(_.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/accounts",{method:"DELETE"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(_.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/accounts/".concat(t),{method:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function he(){return(he=Object(_.a)(b.a.mark(function e(t,a){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/notifications/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(_.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/notifications/".concat(t),{method:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(){return _e.apply(this,arguments)}function _e(){return(_e=Object(_.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/history",{method:"GET"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(_.a)(b.a.mark(function e(t,a){var n,r=arguments;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>2&&void 0!==r[2]?r[2]:5e3,e.next=3,ne.fetch("/api/summary",{method:"POST",body:JSON.stringify({start_date:t,end_date:a})});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(_.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.fetch("/api/transactions",{method:"POST",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oe(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(_.a)(b.a.mark(function e(t,a){var n,r=arguments;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>2&&void 0!==r[2]?r[2]:5e3,e.next=3,ne.fetch("/api/account_summary",{method:"POST",body:JSON.stringify({start_date:t,end_date:a})});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ke=a(45),je=(a(83),a(382)),Se=a(378),Ne=a(379),Ce=a(380),Ae=a(178),Te=a.n(Ae),He=a(66),De=a.n(He),Fe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).on_ok=function(){if(e.validator.allValid()){var t=parseFloat(e.state.price),a=parseFloat(e.state.amount);!function(e,t){he.apply(this,arguments)}(e.state.notification.id,{account:e.state.account.id,price_taken:t,bet_amount:a,result:"Pending",max_profit:(t-1)*a,status:1}),e.props.toggle()}else e.validator.showMessages()},e.on_cancel=function(){e.props.toggle()},e.handleChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.state={notification:{},show_modal:!1,error:"",error_msg:"",account:"",price:null,amount:null,accounts:[]},e.validator=new Te.a,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(je.a,{isOpen:this.state.show_modal,data:{name:"OK"},backdrop:!0},r.a.createElement(Se.a,{toggle:this.toggle},"Dismiss notification ",this.state.notification.id),r.a.createElement(Ne.a,null,r.a.createElement(j.a,null,r.a.createElement(S.a,{className:E.a.isEmpty(this.state.error)?"hidden":""},r.a.createElement(N.a,{color:"danger"},this.state.error_msg)),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"account"},"Account"),r.a.createElement(De.a,{options:this.state.accounts,onChange:function(t){t.length>0&&e.setState({account:t[0]})},placeholder:"Select an account",labelField:"name",valueField:"id"}),this.validator.message("account",this.state.account,"required")),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"price"},"Price taken"),r.a.createElement(A.a,{type:"price",name:"price",id:"price",onChange:this.handleChange}),this.validator.message("price",this.state.price,"required|currency")),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"amount"},"Bet amount"),r.a.createElement(A.a,{type:"amount",name:"amount",id:"amount",onChange:this.handleChange}),this.validator.message("amount",this.state.amount,"required|currency")))),r.a.createElement(Ce.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.on_ok},"OK")," ",r.a.createElement(T.a,{color:"secondary",onClick:this.on_cancel},"Cancel")))}}],[{key:"getDerivedStateFromProps",value:function(e){return{notification:e.data,show_modal:e.show_modal,accounts:e.accounts}}}]),t}(r.a.Component),Pe=a(49),We=a.n(Pe),Me=a(179),Ie=(a(218),a(108)),Be=a.n(Ie),Le=a(93),Re=a.n(Le),Ye=a(180),ze=a.n(Ye),Je=function(){var e=Object(_.a)(b.a.mark(function e(t,a,n,r){var c,s,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return c=e.sent,r.length&&(c=r.reduce(function(e,t){return e.filter(function(e){return(e[t.id]+"").includes(t.value)})},c)),s=E.a.orderBy(c,n.map(function(e){return function(t){return null===t[e.id]||void 0===t[e.id]?-1/0:"string"===typeof t[e.id]?t[e.id].toLowerCase():t[e.id]}}),n.map(function(e){return e.desc?"desc":"asc"})),o={rows:s.slice(t*a,t*a+t),pages:Math.ceil(c.length/t)},e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ue=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).fetch_data=function(){var t=Object(_.a)(b.a.mark(function t(a,n){var r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.is_mounted||e.is_first){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Je(a.pageSize,a.page,a.sorted,a.filtered);case 4:r=t.sent,e.is_mounted&&(e.setState({data:r.rows,pages:r.pages,page:a.page}),e.is_first=!1);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.update_data=function(){E.a.isNil(e.refReactTable)||e.refReactTable.fireFetchData()},e.render_dismiss_btn=function(t){return r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"100%",height:"100%"},onClick:function(a){e.setState({cur_note:e.state.data[t.index],show_modal:!0})}},"Dismiss")},e.render_delete_btn=function(t){return r.a.createElement("button",{type:"button",className:"btn btn-danger",style:{width:"100%",height:"100%"},onClick:function(a){Object(Me.confirmAlert)({title:"Confirm",message:"Are you sure to remove this notification?",buttons:[{label:"Yes",onClick:function(){var a=Object(_.a)(b.a.mark(function a(){return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fe(e.state.data[t.index].id);case 2:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()},{label:"No"}]})}},"Delete")},e.toggle_modal=function(){e.setState(function(e){return{show_modal:!e.show_modal}})},e.handleData=function(t){console.log(t);var a=JSON.parse(t);"update_notification"===a.content&&e.update_data(),!0===a.alert&&e.setState({play:Re.a.status.PLAYING})},e.refReactTable=null,e.is_mounted=!1,e.is_first=!0,e.state={auto_update:!0,data:[],page:0,pages:null,show_modal:!1,cur_note:{},accounts:[],play:Re.a.status.STOPPED,position:0},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.is_mounted=!0}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{url:ze.a,playStatus:this.state.play,autoLoad:!0,volume:100,loop:!1,onFinishedPlaying:function(){e.setState({play:Re.a.status.STOPPED})},debug:!1}),r.a.createElement(Be.a,{url:"ws://127.0.0.1:8000/ws/update/",onMessage:this.handleData,debug:!0}),r.a.createElement(Fe,{data:this.state.cur_note,show_modal:this.state.show_modal,toggle:this.toggle_modal,accounts:this.state.accounts}),r.a.createElement(ke.a,{ref:function(t){e.refReactTable=t},manual:!0,onFetchData:this.fetch_data,data:this.state.data,page:this.state.page,pages:this.state.pages,showPaginationTop:!0,showPaginationBottom:!0,showPagination:!0,pageSizeOptions:[5,10,15,20,50,100],defaultPageSize:15,filterable:!0,defaultFilterMethod:function(e,t,a){var n=e.id;return void 0===t[n]||String(t[n]).includes(e.value)},columns:[{Header:"Dismiss",filterable:!1,Cell:this.render_dismiss_btn},{Header:"Delete",filterable:!1,Cell:this.render_delete_btn},{Header:"No",accessor:"id",filterable:!1,minWidth:50},{Header:"Date",accessor:"datetime",Cell:function(e){return We()(e.value,"yyyy-mm-dd")},style:{textAlign:"center"}},{Header:"Time",accessor:"datetime",Cell:function(e){return We()(e.value,"HH:MM:ss")},style:{textAlign:"center"}},{Header:"Time to Jump",accessor:"time_to_jump"},{Header:"Degree",accessor:"degree",minWidth:70,style:{textAlign:"center"}},{Header:"State",accessor:"state",minWidth:70},{Header:"Venue",accessor:"venue"},{Header:"Race",accessor:"race_number",minWidth:70,style:{textAlign:"center"}},{Header:"Horse No",accessor:"horse_number",minWidth:80,style:{textAlign:"center"}},{Header:"Horse Name",accessor:"horse_name",minWidth:100,style:{textAlign:"left"}},{Header:"Previous",accessor:"previous_price",minWidth:70,getProps:function(e,t,a){return{style:{background:t?"#C8F0D1":"#FFFFFF",textAlign:"center"}}}},{Header:"Current",accessor:"current_price",minWidth:70,getProps:function(e,t,a){return{style:{background:t?"#4FCF6C":"#FFFFFF",textAlign:"center"}}}},{Header:"Bookie",accessor:"bookie"},{Header:"Suggested Stake",accessor:"suggested_stake",Cell:function(e){return E.a.floor(parseFloat(e.value),2)},style:{textAlign:"center"}},{Header:"Max Profit",accessor:"max_profit",style:{textAlign:"center"}},{Header:"Top Price 1",accessor:"top_price_1"},{Header:"Top Price 2",accessor:"top_price_2"},{Header:"Top Price 3",accessor:"top_price_3"},{Header:"Top Price 4",accessor:"top_price_4"}],className:"-striped -highlight"}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{accounts:e.accounts}}}]),t}(r.a.Component),Ke=a(381),Ge=function(){var e=Object(_.a)(b.a.mark(function e(t,a,n,r){var c,s,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:return c=e.sent,r.length&&(c=r.reduce(function(e,t){return e.filter(function(e){return(e[t.id]+"").includes(t.value)})},c)),s=E.a.orderBy(c,n.map(function(e){return function(t){return null===t[e.id]||void 0===t[e.id]?-1/0:"string"===typeof t[e.id]?t[e.id].toLowerCase():t[e.id]}}),n.map(function(e){return e.desc?"desc":"asc"})),o={rows:s.slice(t*a,t*a+t),pages:Math.ceil(c.length/t)},e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),qe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).fetch_data=function(){var t=Object(_.a)(b.a.mark(function t(a,n){var r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.is_mounted||e.is_first){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Ge(a.pageSize,a.page,a.sorted,a.filtered);case 4:r=t.sent,e.is_mounted&&(e.setState({data:r.rows,pages:r.pages}),e.is_first=!1);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.render_result_cell=function(t){var a=e.state.data[t.index].result,n="";return n="Win"===a?"success":"Lose"===a?"danger":"warning",r.a.createElement(Ke.a,{pill:!0,color:n,style:{width:"100%",height:"100%"}},a)},e.handleData=function(t){"update_notification"===JSON.parse(t).content&&e.update_data()},e.update_data=function(){E.a.isNil(e.ref_tbl)||e.ref_tbl.fireFetchData()},e.ref_tbl=null,e.is_mounted=!1,e.is_first=!0,e.state={data:[],pages:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.is_mounted=!0}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{url:"ws://127.0.0.1:8000/ws/update/",onMessage:this.handleData,debug:!0}),r.a.createElement(ke.a,{ref:function(t){e.ref_tbl=t},manual:!0,onFetchData:this.fetch_data,data:this.state.data,pages:this.state.pages,filterable:!0,showPaginationTop:!0,showPaginationBottom:!0,showPagination:!0,pageSizeOptions:[5,10,15,20,50,100],defaultPageSize:15,defaultFilterMethod:function(e,t,a){var n=e.id;return void 0===t[n]||String(t[n]).includes(e.value)},columns:[{Header:"No",accessor:"id",filterable:!1,minWidth:50,style:{textAlign:"center"}},{Header:"Date",accessor:"datetime",Cell:function(e){return We()(e.value,"yyyy-mm-dd")},style:{textAlign:"center"}},{Header:"Time",accessor:"datetime",Cell:function(e){return We()(e.value,"HH:MM:ss")},style:{textAlign:"center"}},{Header:"Time to Jump",accessor:"time_to_jump"},{Header:"State",accessor:"state",minWidth:80,style:{textAlign:"center"}},{Header:"Venue",accessor:"venue",minWidth:80,style:{textAlign:"center"}},{Header:"Race No",accessor:"race_number",minWidth:80,style:{textAlign:"center"}},{Header:"Horse No",accessor:"horse_number",minWidth:80,style:{textAlign:"center"}},{Header:"Price Taken",accessor:"price_taken",minWidth:100,style:{textAlign:"center"}},{Header:"Account",accessor:"account_name"},{Header:"Bet Amount",accessor:"bet_amount",minWidth:100,style:{textAlign:"center"}},{Header:"Max Profit",accessor:"max_profit"},{Header:"Result",accessor:"result",minWidth:80,Cell:this.render_result_cell}],className:"-striped -highlight"}))}}]),t}(r.a.Component),Ve=a(25),$e=a.n(Ve),Qe=a(181),Xe=a.n(Qe),Ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).apply_daterange=function(e,t){a.setState({start_date:e,end_date:t}),a.props.range_changed(e,t)},a.state={start_date:a.props.start,end_date:a.props.end},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=new Date,t=$e()(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),a=$e()(t).add(1,"days").subtract(1,"seconds"),n={"Today Only":[$e()(t),$e()(a)],"Yesterday Only":[$e()(t).subtract(1,"days"),$e()(a).subtract(1,"days")],"3 Days":[$e()(t).subtract(3,"days"),$e()(a)]},c=$e()(t).add(24,"hour");return r.a.createElement(Xe.a,{style:{display:"inline"},ranges:n,start:this.state.start_date,end:this.state.end_date,local:{format:"DD-MM-YYYY",sundayFirst:!1},maxDate:c,applyCallback:this.apply_daterange},r.a.createElement("button",{className:"btn btn-secondary"},We()(this.state.start_date,"dddd, mmmm dS yyyy")," ~ ",We()(this.state.end_date,"dddd, mmmm dS yyyy")))}}]),t}(r.a.Component),et=function(){var e=Object(_.a)(b.a.mark(function e(t,a,n,r,c,s){var o,i,u;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t,a);case 2:return o=e.sent,s.length&&(o=s.reduce(function(e,t){return e.filter(function(e){return(e[t.id]+"").includes(t.value)})},o)),i=E.a.orderBy(o,c.map(function(e){return function(t){return null===t[e.id]||void 0===t[e.id]?-1/0:"string"===typeof t[e.id]?t[e.id].toLowerCase():t[e.id]}}),c.map(function(e){return e.desc?"desc":"asc"})),u={rows:i.slice(n*r,n*r+n),pages:Math.ceil(o.length/n)},e.abrupt("return",u);case 7:case"end":return e.stop()}},e)}));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}(),tt=function(e){function t(){var e;Object(i.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).fetch_data=function(){var t=Object(_.a)(b.a.mark(function t(a,n){var r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(e.start_date,e.end_date,a.pageSize,a.page,a.sorted,a.filtered);case 2:r=t.sent,e.setState({data:r.rows,pages:r.pages});case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.daterange_changed=function(t,a){e.start_date=t,e.end_date=a,e.ref_table.fireFetchData()};var a=new Date;return e.start_date=$e()(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)),e.end_date=$e()(e.start_date).add(1,"days").subtract(1,"seconds"),e.state={data:[],pages:null},e.ref_table=null,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{style:{marginLeft:"0px"}},r.a.createElement(O.a,{style:{marginLeft:"10px"}},r.a.createElement(Ze,{range_changed:this.daterange_changed,start:this.start_date,end:this.end_date})),r.a.createElement(O.a,null,r.a.createElement("div",{className:"summary_table"},r.a.createElement(ke.a,{ref:function(t){e.ref_table=t},onFetchData:this.fetch_data,data:this.state.data,pages:this.state.pages,loading:this.state.loading,columns:[{Header:"Account",accessor:"account"},{Header:"Total Bets",accessor:"total_bets"},{Header:"Total Wins",accessor:"total_wins"},{Header:"Turnover",accessor:"turnover"},{Header:"Returns",accessor:"returns"},{Header:"Profit",accessor:"profit"},{Header:"Strike Rate",accessor:"strike_rate"},{Header:"P.O.T",accessor:"pot"},{Header:"Pending Bets",accessor:"pending_bets"},{Header:"Pending Turnover",accessor:"pending_turnover"},{Header:"Current Position",accessor:"cur_position"}],defaultPageSize:10,className:"-striped -highlight"}))))}}]),t}(r.a.Component),at=a(33),nt=(a(307),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).validate=function(){return""!==a.state.account||(a.setState({error:!0,error_msg:"Account name can not be empty"}),!1)},a.on_ok=Object(_.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.validate()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ie({name:a.state.account});case 4:t=e.sent,E.a.isNil(t.id)?a.setState({error:!0,error_msg:E.a.values(t)[0]}):(a.props.refresh_accounts(),a.props.refresh_accounts(),a.props.toggle(),a.setState({error:!1}));case 6:case"end":return e.stop()}},e)})),a.on_cancel=function(){a.props.toggle()},a.state={show_modal:!1,error:!1,error_msg:"",account:"",user:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(je.a,{isOpen:this.state.show_modal,backdrop:!0},r.a.createElement(Se.a,{toggle:this.toggle},"Add a new account to user ",this.props.user?this.props.user.username:"null"),r.a.createElement(Ne.a,null,r.a.createElement(j.a,null,r.a.createElement(S.a,{className:this.state.error?"":"hidden"},r.a.createElement(N.a,{color:"danger"},this.state.error_msg)),r.a.createElement(S.a,null,r.a.createElement(C.a,{for:"account_name"},"Account Name"),r.a.createElement(A.a,{type:"account_name",name:"account_name",onChange:function(t){e.setState({account:t.target.value})}})))),r.a.createElement(Ce.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.on_ok},"Add")," ",r.a.createElement(T.a,{color:"secondary",onClick:this.on_cancel},"Cancel")))}}],[{key:"getDerivedStateFromProps",value:function(e){return{user:e.user,show_modal:e.show_modal}}}]),t}(r.a.Component)),rt=a(183),ct=a.n(rt),st=a(94),ot=a.n(st),it=a(27),ut=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).refresh_accounts=function(){a.props.account_changed_handler()},a.add_new_account=function(){a.setState({open_add_modal:!0})},a.remove_all_accounts=function(){a.show_alert_pop("Are you sure to remove all accounts?",Object(_.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:a.setState({alert_pop:null}),a.refresh_accounts(),it.ToastsStore.success("All accounts are removed.");case 5:case"end":return e.stop()}},e)})),function(){a.setState({alert:null})})},a.show_alert_pop=function(e,t,n){a.setState({alert_pop:r.a.createElement(ct.a,{title:e,onCancel:n,onConfirm:t,confirmBtnBsStyle:"link",cancelBtnBsStyle:"primary",showCancel:!0,btnSize:"sm"})})},a.render_edit_btn=function(e){return r.a.createElement("button",{type:"button",className:"btn btn-info",style:{width:"100%",height:"100%"},onClick:function(t){alert("edit "+e.index)}},"Edit")},a.render_remove_btn=function(e){return r.a.createElement("button",{type:"button",className:"btn btn-warning",style:{width:"100%",height:"100%"},onClick:function(t){a.show_alert_pop("Are you sure to remove the account?",Object(_.a)(b.a.mark(function t(){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.setState({alert_pop:null}),t.next=3,me(a.state.accounts[e.index].id);case 3:it.ToastsStore.success("The account ".concat(a.state.accounts[e.index].name," are removed.")),a.refresh_accounts();case 5:case"end":return t.stop()}},t)})),function(){a.setState({alert_pop:null})})}},"Remove")},a.deposit=Object(_.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.cur_account){e.next=3;break}return it.ToastsStore.error("Account is not selected"),e.abrupt("return");case 3:if(0!==(t=a.deposit_amount*a.deposit_direction)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,we({account:a.state.cur_account.id,date:a.state.cur_date,amount:t,action:"Deposit"});case 8:n=e.sent,E.a.isNil(n.action)?it.ToastsStore.error("Deposit failed"):(it.ToastsStore.success("Deposit success"),a.refresh_accounts());case 10:case"end":return e.stop()}},e)})),a.withdraw=Object(_.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.cur_account){e.next=3;break}return it.ToastsStore.error("Account is not selected"),e.abrupt("return");case 3:if(0!==(t=a.withdraw_amount*a.withdraw_direction)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,we({account:a.state.cur_account.id,date:a.state.cur_date,amount:t,action:"Withdraw"});case 8:n=e.sent,E.a.isNil(n.action)?it.ToastsStore.error("Withdraw failed"):(it.ToastsStore.success("Withdraw success"),a.refresh_accounts());case 10:case"end":return e.stop()}},e)})),a.adjust=Object(_.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.cur_account){e.next=3;break}return it.ToastsStore.error("Account is not selected"),e.abrupt("return");case 3:if(0!==(t=a.adjust_amount)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,we({account:a.state.cur_account.id,date:a.state.cur_date,amount:t,action:"Adjust"});case 8:n=e.sent,E.a.isNil(n.action)?it.ToastsStore.error("Adjust failed"):(it.ToastsStore.success("Adjust success"),a.refresh_accounts());case 10:case"end":return e.stop()}},e)})),a.set_actual_closing=Object(_.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.cur_account){e.next=3;break}return it.ToastsStore.error("Account is not selected"),e.abrupt("return");case 3:if(0!==(t=a.actual_closing)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,we({account:a.state.cur_account.id,date:a.state.cur_date,amount:t,action:"Actual"});case 8:n=e.sent,E.a.isNil(n.action)?it.ToastsStore.error("Setting autual closing failed"):(it.ToastsStore.success("Setting autual closing success"),a.refresh_accounts());case 10:case"end":return e.stop()}},e)})),a.toggle_add_modal=function(){a.setState({open_add_modal:!a.state.open_add_modal})},a.state={user:null,open_add_modal:!1,accounts:[],cur_date:new Date,alert_pop:null,cur_account:null},a.ref_table=null,a.deposit_amount=0,a.deposit_direction=1,a.withdraw_amount=0,a.withdraw_direction=1,a.adjust_amount=0,a.actual_closing=0,a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.accounts;return r.a.createElement(r.a.Fragment,null,this.state.alert_pop,r.a.createElement(it.ToastsContainer,{store:it.ToastsStore}),r.a.createElement(nt,{show_modal:this.state.open_add_modal,toggle:this.toggle_add_modal,refresh_accounts:this.refresh_accounts,user:this.state.user}),r.a.createElement(at.d,null,r.a.createElement(at.b,null,r.a.createElement(at.a,null,"Accounts"),r.a.createElement(at.a,null,"Deposit"),r.a.createElement(at.a,null,"Withdraw"),r.a.createElement(at.a,null,"Account Adjustment"),r.a.createElement(at.a,null,"Actual Closing")),r.a.createElement(at.c,null,r.a.createElement(y.a,null,r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.add_new_account},"Add new account")),r.a.createElement(x.a,null,r.a.createElement("button",{className:"btn btn-danger",onClick:this.remove_all_accounts},"Remove all"))),r.a.createElement(ke.a,{ref:function(t){e.ref_table=t},data:t,showPagination:!0,onFetchData:this.props.fetch_accounts,columns:[{Header:"No",id:"No",width:100,Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"Account",accessor:"name"},{Header:"Remove",Cell:this.render_remove_btn,width:100}],defaultPageSize:5,className:"-striped -highlight"}))),r.a.createElement(at.c,null,r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Account")),r.a.createElement(x.a,{className:"col-md-3"},r.a.createElement(De.a,{options:this.state.accounts,values:this.state.cur_account?[this.state.cur_account]:[],onChange:function(t){t.length>0&&e.setState({cur_account:t[0]})},placeholder:"Select an account",labelField:"name",valueField:"id"}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Date")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement(ot.a,{clearIcon:null,value:this.state.cur_date,onChange:function(t){e.setState({cur_date:t})}}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Amount")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("input",{type:"text",onChange:function(t){e.deposit_amount=t.target.value}}))),r.a.createElement(O.a,{style:{marginTop:"20px"}},r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(t){e.deposit_direction=1,e.deposit()},style:{width:"100%",height:"100%"}},"Deposit Into")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.deposit_direction=-1,e.deposit()},style:{width:"100%",height:"100%"}},"Deposit From")))),r.a.createElement(at.c,null,r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Account")),r.a.createElement(x.a,{className:"col-md-3"},r.a.createElement(De.a,{options:this.state.accounts,values:this.state.cur_account?[this.state.cur_account]:[],onChange:function(t){t.length>0&&e.setState({cur_account:t[0]})},placeholder:"Select an account",labelField:"name",valueField:"id"}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Date")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement(ot.a,{clearIcon:null,value:this.state.cur_date,onChange:function(t){e.setState({cur_date:t})}}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Amount")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("input",{type:"text",onChange:function(t){e.withdraw_amount=t.target.value}}))),r.a.createElement(O.a,{style:{marginTop:"20px"}},r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(t){e.withdraw_direction=1,e.withdraw()},style:{width:"100%",height:"100%"}},"Withdraw Into")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.withdraw_direction=-1,e.withdraw()},style:{width:"100%",height:"100%"}},"Withdraw From")))),r.a.createElement(at.c,null,r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Account")),r.a.createElement(x.a,{className:"col-md-3"},r.a.createElement(De.a,{options:this.state.accounts,values:this.state.cur_account?[this.state.cur_account]:[],onChange:function(t){t.length>0&&e.setState({cur_account:t[0]})},placeholder:"Select an account",labelField:"name",valueField:"id"}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Date")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement(ot.a,{clearIcon:null,value:this.state.cur_date,onChange:function(t){e.setState({cur_date:t})}}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Amount")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("input",{type:"text",onChange:function(t){e.adjust_amount=t.target.value}}))),r.a.createElement(O.a,{style:{marginTop:"20px"}},r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-info",onClick:this.adjust,style:{width:"100%",height:"100%"}},"Apply Adjustment")))),r.a.createElement(at.c,null,r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Account")),r.a.createElement(x.a,{className:"col-md-3"},r.a.createElement(De.a,{options:this.state.accounts,values:this.state.cur_account?[this.state.cur_account]:[],onChange:function(t){t.length>0&&e.setState({cur_account:t[0]})},placeholder:"Select an account",labelField:"name",valueField:"id"}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Date")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement(ot.a,{clearIcon:null,value:this.state.cur_date,onChange:function(t){e.setState({cur_date:t})}}))),r.a.createElement("br",null),r.a.createElement(O.a,null,r.a.createElement(x.a,{className:"col-md-1"},r.a.createElement("div",null,"Amount")),r.a.createElement(x.a,{className:"col-md-2"},r.a.createElement("input",{type:"text",onChange:function(t){e.actual_closing=t.target.value}}))),r.a.createElement(O.a,{style:{marginTop:"20px"}},r.a.createElement(x.a,{className:"col-md-3"},r.a.createElement("button",{className:"btn btn-info",onClick:this.set_actual_closing,style:{width:"100%",height:"100%"}},"Set Actual Closing Amount"))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{user:e.user,accounts:e.accounts}}}]),t}(r.a.Component),lt=function(){var e=Object(_.a)(b.a.mark(function e(t,a,n,r,c,s){var o,i,u;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(t,a);case 2:return o=e.sent,s.length&&(o=s.reduce(function(e,t){return e.filter(function(e){return(e[t.id]+"").includes(t.value)})},o)),i=E.a.orderBy(o,c.map(function(e){return function(t){return null===t[e.id]||void 0===t[e.id]?-1/0:"string"===typeof t[e.id]?t[e.id].toLowerCase():t[e.id]}}),c.map(function(e){return e.desc?"desc":"asc"})),u={rows:i.slice(n*r,n*r+n),pages:Math.ceil(o.length/n),all_accounts:o},e.abrupt("return",u);case 7:case"end":return e.stop()}},e)}));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}(),dt=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).fetch_data=function(){var e=Object(_.a)(b.a.mark(function e(t,n){var r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.is_mounted||a.is_first){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lt(a.start_date,a.end_date,t.pageSize,t.page,t.sorted,t.filtered);case 4:if(r=e.sent,a.is_mounted){e.next=7;break}return e.abrupt("return");case 7:a.setState({data:r.rows,pages:r.pages}),a.is_first=!1;case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.daterange_changed=function(e,t){a.start_date=e,a.end_date=t,a.ref_tbl.fireFetchData()},a.account_changed=function(){a.ref_tbl.fireFetchData()};var n=new Date,r=$e()(new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,1)),c=$e()(r).add(1,"days").subtract(2,"seconds");return a.start_date=r,a.end_date=c,a.is_mounted=!1,a.is_first=!0,a.ref_tbl=null,a.state={data:[],pages:null,accounts:[],user:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.is_mounted=!0}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{style:{marginLeft:"0px"}},r.a.createElement(O.a,{style:{marginLeft:"10px"}},r.a.createElement(Ze,{range_changed:this.daterange_changed,start:this.start_date,end:this.end_date})),r.a.createElement(O.a,null,r.a.createElement("div",null,r.a.createElement(ke.a,{ref:function(t){e.ref_tbl=t},onFetchData:this.fetch_data,data:this.state.data,pages:this.state.pages,columns:[{Header:"Account",accessor:"account"},{Header:"Opening Balance",accessor:"opening_balance"},{Header:"Deposit",accessor:"deposit"},{Header:"Withdrawl",accessor:"withdrawl"},{Header:"Account Adjustments",accessor:"adjustments"},{Header:"Closing Balance",accessor:"closing_balance"},{Header:"Actual Closing Balance",accessor:"actual_closing_balance"},{Header:"Movement",accessor:"movement"}],defaultPageSize:10,className:"-striped -highlight"}))),r.a.createElement(ut,{user:this.state.user,fetch_accounts:this.fetch_accounts,accounts:this.state.accounts.slice(0,10),account_changed_handler:this.account_changed}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{user:e.user,accounts:e.accounts}}}]),t}(r.a.Component),mt=a(184),pt=a.n(mt),ht=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).fetch_accounts=Object(_.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:t=e.sent,a.setState({accounts:t});case 4:case"end":return e.stop()}},e)})),a.refresh_accounts=function(){a.fetch_accounts()},a.tab_changed=function(e){a.setState({tab:e})},a.expanded_changed=function(e){a.setState({expanded:e})},a.state={user:null,tab:"Notification",expanded:!1,accounts:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.refresh_accounts()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"dashboard_main"},r.a.createElement(ae,{tab:this.state.tab,className:"col",user:this.state.user,expanded:this.state.expanded,tab_changed:this.tab_changed,expanded_changed:this.expanded_changed}),r.a.createElement(y.a,{className:"col dashboard_region",style:{marginLeft:this.state.expanded?240:64,height:"100%",width:this.state.expanded?"calc(100% - 240px)":"calc(100% - 64px)"}},r.a.createElement(O.a,{className:"dashboard_region_header jumbotron jumbotron-fluid bg-dark text-white"},r.a.createElement(x.a,null,r.a.createElement("h2",{className:"col-md-6"},this.state.tab)),r.a.createElement(x.a,{style:{textAlign:"right"}},r.a.createElement(pt.a,{className:"col-md-6",format:"MMMM D YYYY HH:mm:ss",ticking:!0}))),r.a.createElement(O.a,null,function(){switch(e.state.tab){case"Notification":return r.a.createElement(Ue,{user:e.state.user,accounts:e.state.accounts});case"Historical Bets":return r.a.createElement(qe,{user:e.state.user,accounts:e.state.accounts});case"Summary":return r.a.createElement(tt,{user:e.state.user,accounts:e.state.accounts});case"Account":return r.a.createElement(dt,{user:e.state.user,accounts:e.state.accounts,refresh_accounts:e.refresh_accounts});default:return r.a.createElement(r.a.Fragment,null)}}()))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{user:e.user}}}]),t}(r.a.Component),ft=new w,gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).logged_in=function(e){a.setState({user:e})},a.state={user:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"min-height-600"},r.a.createElement(bt,{exact:!0,path:"/",component:function(){return r.a.createElement(ht,{user:e.state.user})}}),r.a.createElement(h.b,{path:"/login",component:function(){return r.a.createElement(U,{logged_in:e.logged_in})}}),r.a.createElement(h.b,{path:"/signup",component:V}),r.a.createElement(bt,{path:"/dashboard",component:function(){return r.a.createElement(ht,{user:e.state.user})}})))))}}]),t}(n.Component),bt=function(e){var t=e.component,a=Object(o.a)(e,["component"]);return r.a.createElement(h.b,Object.assign({},a,{render:function(e){return ft.loggedIn()?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},_t=gt,vt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Et(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(359),a(360);s.a.render(r.a.createElement(_t,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");vt?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Et(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Et(t,e)})}}()}},[[185,1,2]]]);
//# sourceMappingURL=main.0eec708e.chunk.js.map